<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Flask Leaflet App</title>
</head>
<body>
<div id="map"></div>
<div id="coordinates">Selected Coordinates: <span id="selected-coordinates">None</span></div>
<button onclick="navigateToForm()">Get the route to your destination</button>


<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    var map = L.map('map').setView([31.091125, 31.408324], 13);
    var marker;
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);
    var customIcon = L.icon({
        iconUrl: '{{ url_for("static", filename="images/marker.png") }}',
        iconSize: [32, 32],
        iconAnchor: [16, 32],
    });
    function updateMarker(latlng) {
        if (!marker) {
            marker = L.marker(latlng, { icon: customIcon }).addTo(map);
        } else {
            marker.setLatLng(latlng);
        }
        document.getElementById('selected-coordinates').innerText = latlng.lat.toFixed(6) + ', ' + latlng.lng.toFixed(6);
    }
    updateMarker({ lat: 31.091125, lng: 31.408324 });
    map.on('click', function(e) {
        var coordinates = e.latlng;
        updateMarker(coordinates);
    });

    function navigateToForm() {
        window.location.href = "/form";
    }
</script>
</body>
</html>
